# 代码文件说明（folder.md）

本文件声明本目录下**全部代码文件**的内容、功能与输入输出。

- `run-agent.js`
  - 功能：启动双代理辩论主循环
  - 输入：`.env` 环境变量
  - 输出：持续运行的辩论进程，更新 `state/`、`journal/` 与 `logs/`
- `run-monitor.js`
  - 功能：启动辩论监控 CLI
  - 输入：`.env` 环境变量与 `state/` 输出文件
  - 输出：终端实时仪表盘
- `package.json`
  - 功能：声明 Node.js 依赖与 npm 脚本
  - 输入：无（供 npm 读取）
  - 输出：可执行的 `npm run` 命令与依赖清单
- `start.sh`
  - 功能：一键启动脚本（创建环境、安装依赖并启动）
  - 输入：当前目录与可选 `.env`
  - 输出：依赖安装结果与启动进程
- `scripts/clean-runtime.sh`
  - 功能：清理运行记录与生成文件，仅保留 git 跟踪的原始代码文件
  - 输入：当前目录（git 仓库）
  - 输出：清理后的工作区（可选恢复 `.env` / `creative_brief.md`）
- `src/config.js`
  - 功能：加载与解析配置（辩论循环、身份档案与重试参数）
  - 输入：环境变量与 `.env`
  - 输出：配置对象
- `src/prompts.js`
  - 功能：构建双代理辩论提示词
  - 输入：身份档案、主题、回合信息与对话上下文
  - 输出：完整提示词字符串
- `src/llmClient.js`
  - 功能：调用 vLLM OpenAI 兼容 API，并带重试
  - 输入：提示词与生成参数
  - 输出：模型文本响应
- `src/logger.js`
  - 功能：记录运行日志并控制日志滚动
  - 输入：日志级别、消息与元数据
  - 输出：写入 `logs/` 日志文件
- `src/journal.js`
  - 功能：写入辩论日志与结构化事件记录
  - 输入：对话内容、身份更新、系统事件
  - 输出：`journal/` 与 `logs/` 中的日志文件
- `src/agent.js`
  - 功能：双代理辩论主循环、身份更新与状态写入
  - 输入：配置、身份档案、对话上下文、模型响应
  - 输出：`state/` 状态文件与对话记录
- `src/monitor.js`
  - 功能：读取状态、对话与身份档案，渲染辩论监控 UI
  - 输入：`state/` 文件与 identity 文档
  - 输出：实时监控界面
- `src/utils.js`
  - 功能：通用解析与文件工具
  - 输入：字符串/路径
  - 输出：解析后的值或截断文本
